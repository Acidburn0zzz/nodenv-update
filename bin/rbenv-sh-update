#!/usr/bin/env bash
set -e
[ -n "$RBENV_DEBUG" ] && set -x

shell="$(basename "${RBENV_SHELL:-$SHELL}")"


echo "command rbenv update $@;"
echo "if command test -t 1; then"
echo "printf \"\\e[1;32mReloading rbenv\\e[0m\\n\";"

case "$shell" in
fish )
  cat <<EOF
  . (rbenv init -|psub)
  printf " \\033[1;32m|\\033[0m  done\\n"
else
  printf "reloading rbenv\\n"
  . (rbenv init -|psub)
  printf " |  done\\n"
end
EOF
  ;;
* )
  cat <<EOF
  eval "\$(rbenv init -)";
  printf " \\033[1;32m|\\033[0m  done\\n";
else
  printf "reloading rbenv\\n";
  eval "\$(rbenv init -)";
  printf " |  done\\n";
fi
EOF
  ;;
esac
